webpackJsonp([1],{"65P6":function(t,e){},"7GtW":function(t,e){},AaFL:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("fZjL"),r=n.n(a),i=n("7+uW"),s=n("NYxO"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")({name:"app"},o,!1,function(t){n("rJ6Y")},null,null).exports,l=n("/ocq"),u=n("mtWM"),d=n.n(u),h={name:"Auth",data:function(){return{displayError:"none",username:"",password:""}},methods:{login:function(t){var e=this;this.displayError="none",this.http.post("api/v1/signin",{username:this.username,password:this.password}).then(function(t){sessionStorage.setItem("token",t.data.token),e.$router.push({path:"/main"})}).catch(function(t){console.log(t),e.displayError="block"})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth"},[n("p",{staticClass:"title"},[t._v("Авторизация")]),t._v(" "),n("div",{staticClass:"inp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",type:"text",placeholder:"Логин"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"inp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),n("input",{attrs:{id:"login",type:"submit",value:""},on:{click:t.login}}),t._v(" "),n("div",{style:{display:t.displayError},attrs:{id:"error"}},[t._v("\n      Всё плохо.\n  ")])])},staticRenderFns:[]};var m=n("VU/8")(h,p,!1,function(t){n("ewHo")},"data-v-0b924a15",null).exports,f=n("BO1k"),v=n.n(f),g=n("Xxa5"),_=n.n(g),y=n("exGp"),w=n.n(y),k={name:"All",data:function(){return{filterKey:"",sortKey:"",sortOrders:{},columns:["username","name","age","sex"],columnsName:["Имя (username)","Имя (name)","Возраст","Пол"],data:""}},created:function(){this.data=this.$store.getters.all;var t={};this.columns.forEach(function(e){t[e]=1}),this.sortOrders=t},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),n=this.sortOrders[t]||1,a=this.data;return e&&(a=a.filter(function(t){return r()(t).some(function(n){return String(t[n]).toLowerCase().indexOf(e)>-1})})),t&&(a=a.slice().sort(function(e,a){return((e=e[t])===(a=a[t])?0:e>a?1:-1)*n})),a}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},toOneUser:function(t){this.$store.commit("id",t),this.$store.commit("component","page-one-user")}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all"},[n("form",{attrs:{id:"search"}},[n("p",{staticStyle:{display:"inline-block"}},[t._v("Найти пользователя")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],attrs:{name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}})]),t._v(" "),n("table",[n("thead",[n("tr",t._l(t.columns,function(e,a){return n("th",{key:e.id,class:{active:t.sortKey==e},on:{click:function(n){return t.sortBy(e)}}},[t._v("\n                "+t._s(t._f("capitalize")(t.columnsName[a]))+"\n                "),n("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}),0)]),t._v(" "),n("tbody",t._l(t.filteredData,function(e,a){return n("tr",{key:e.id,on:{click:function(e){return t.toOneUser(a)}}},t._l(t.columns,function(a){return n("td",{key:a.id},[t._v("\n                    "+t._s("name"==a&&"admin0"==e.username?"admin0":e[a])+"\n                ")])}),0)}),0)])])},staticRenderFns:[]};var A=n("VU/8")(k,x,!1,function(t){n("c8SD")},"data-v-52d29d5d",null).exports,b={name:"google-map",data:function(){return{mapName:"google-map",map:null,all:"",flightPath:"",filterKey:"",open:!0,activeItem:-1,i:""}},created:function(){this.all=this.$store.getters.all},computed:{name:function(){var t=this.i;return this.filteredData.filter(function(e){return r()(e).some(function(n){return String(e[n]).toLowerCase().indexOf(t)>-1})})[0].username},filteredData:function(){var t=this.filterKey&&this.filterKey.toLowerCase(),e=this.all;return t&&(e=e.filter(function(e){return r()(e).some(function(n){return String(e[n]).toLowerCase().indexOf(t)>-1})})),e},filteredDate:function(){var t=this.all,e=this.i,n=t.filter(function(t){return r()(t).some(function(n){return String(t[n]).toLowerCase().indexOf(e)>-1})})[0].track.dateTrack;n=this.unique(n);var a=this.filterKey&&this.filterKey.toLowerCase();return a&&(n=n.filter(function(t){return r()(t).some(function(e){return String(t[e]).toLowerCase().indexOf(a)>-1})})),n}},mounted:function(){var t=document.getElementById(this.mapName),e={zoom:10,center:new google.maps.LatLng(55.754941,37.617188)};this.map=new google.maps.Map(t,e)},methods:{filteredTime:function(t){var e=this.all,n=this.i,a=e.filter(function(t){return r()(t).some(function(e){return String(t[e]).toLowerCase().indexOf(n)>-1})})[0].track,i=[];a.dateTrack.forEach(function(e,n){e==t&&i.push(a.startTime[n]+" - "+a.stopTime[n])});var s=this.filterKey&&this.filterKey.toLowerCase();return s&&(i=i.filter(function(t){return r()(t).some(function(e){return String(t[e]).toLowerCase().indexOf(s)>-1})})),i},unique:function(t){for(var e={},n=0;n<t.length;n++){e[t[n]]=!0}return r()(e)},showDate:function(){var t=w()(_.a.mark(function t(e){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.i=e,this.open=!1,this.filterKey="";case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),timesOfDate:function(){var t=w()(_.a.mark(function t(e){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.activeItem=this.activeItem==e?-1:e,this.filterKey="";case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),userOnMap:function(){var t=w()(_.a.mark(function t(e,n){var a,i,s,o,c,l,u,d,h;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=this.all,i=this.i,s=a.filter(function(t){return r()(t).some(function(e){return String(t[e]).toLowerCase().indexOf(i)>-1})})[0].track,o=void 0,c=void 0,console.log(e+" "+n),s.dateTrack.forEach(function(t,a){c=s.startTime[a]+" - "+s.stopTime[a],t==e&&c==n&&(o=a)}),l=s.points[o],console.log(l),l=JSON.parse(l).track,this.flightPath&&this.flightPath.setMap(null),u=[],d=0;case 12:if(!(d<l.length)){t.next=18;break}return t.next=15,u.push({lat:l[d].lat,lng:l[d].lon});case 15:d++,t.next=12;break;case 18:this.flightPath=new google.maps.Polyline({path:u,geodesic:!0,strokeColor:"rgb(41, 59, 83)",strokeOpacity:1,strokeWeight:2}),this.flightPath.setMap(this.map),h=new google.maps.LatLngBounds,u.forEach(function(t){return h.extend(t)}),h.getCenter(),this.map.fitBounds(h);case 24:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),back:function(){this.open=!0}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map"},[n("div",{staticClass:"google-map",attrs:{id:t.mapName}}),t._v(" "),n("div",[n("form",{attrs:{id:"search"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],attrs:{name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}})]),t._v(" "),t._l(t.filteredData,function(e,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],key:a,staticClass:"k",on:{click:function(n){return t.showDate(e._id)}}},[t._v("\n\t\t\t\t"+t._s(e.username)+"\n        \t")])}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.open,expression:"!open"}],staticClass:"oneUser"},[n("div",{staticClass:"k",on:{click:t.back}},[t._v("← Назад")]),t._v(" "),n("p",[t._v(" "+t._s(t.name)+" ")]),t._v(" "),t._l(t.filteredDate,function(e,a){return n("div",{key:a,staticClass:"k",on:{click:function(e){return t.timesOfDate(a)}}},[t._v("\n\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t"),t._v(" "),t._l(t.filteredTime(e),function(r,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.activeItem==a,expression:"activeItem == index"}],key:i,staticClass:"k2",on:{click:function(n){return t.userOnMap(e,r)}}},[t._v("\n\t\t\t\t\t\t"+t._s(r)+"\n\t\t\t\t\t\t")])})],2)})],2)],2)])},staticRenderFns:[]};var C=n("VU/8")(b,O,!1,function(t){n("AaFL")},"data-v-79312e57",null).exports,F={name:"Map",data:function(){return{data:"",data2:"",show_tooltip:!1,show_doc:!0,show_cancel:!1,grid:"1fr auto",change:"Изменить документацию"}},created:function(){this.data=this.$store.getters.doc,this.data2=this.data},methods:{clickButton:function(){this.show_tooltip=!this.show_tooltip,this.show_doc=!this.show_doc,this.show_cancel=!this.show_cancel,"Изменить документацию"==this.change?(this.grid="1fr auto auto",this.change="Подтвердить",this.data2=this.data2.replace(/<br\/>/g,"\n")):(this.grid="1fr auto",this.confirmButton(),this.change="Изменить документацию")},cancel:function(){this.show_tooltip=!this.show_tooltip,this.show_doc=!this.show_doc,this.change="Изменить документацию",this.show_cancel=!1},confirmButton:function(){var t=w()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.data=this.data2.replace(/\n/g,"<br/>"),t.next=3,this.http.post("api/v1/data/change",{token:sessionStorage.getItem("token"),name:this.data}).then(function(t){console.log("Изменили документацию")}).catch(function(t){console.log(t),console.log("Что-то не то введено")});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"docum"},[n("div",{staticClass:"title",style:{gridTemplateColumns:t.grid}},[n("p",[t._v(" Документация по базе данных. ")]),t._v(" "),t.show_cancel?n("button",{staticStyle:{"margin-right":"15px"},on:{click:function(e){return t.cancel()}}},[t._v(" Отменить ")]):t._e(),t._v(" "),n("button",{on:{click:function(e){return t.clickButton()}}},[t._v(" "+t._s(t.change)+" ")])]),t._v(" "),t.show_tooltip?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data2,expression:"data2"}],staticClass:"tooltip",attrs:{wrap:"hard"},domProps:{value:t.data2},on:{click:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.data2=e.target.value)}}}):t._e(),t._v(" "),t.show_doc?n("p",{staticClass:"doc",domProps:{innerHTML:t._s(t.data)}}):t._e()])},staticRenderFns:[]};var $=n("VU/8")(F,S,!1,function(t){n("T2Ac")},"data-v-12f31158",null).exports,N=n("pFYg"),K=n.n(N),L={name:"item",props:{model:{type:Object,required:!1,default:function(){return{value:this.$store.getters.allId,name:this.$store.getters.allId.username}}}},data:function(){return{open:!1}},created:function(){},computed:{begin:function(){return this.$store.getters.allId==this.data?"begin":""},data:function(){return(this.model.value==this.$store.getters.allId||this.model.value.length<10)&&(this.open=!0),this.model.value},name:function(){return this.model.name},isFolder:function(){return"object"!=K()(this.data)||Array.isArray(this.data)?"points"==this.name&&(console.log(this.name),this.data):r()(this.data)},isArray:function(){return!(!Array.isArray(this.data)||0==this.data.length||"points"==this.name)&&this.data}},methods:{toggle:function(){(this.isFolder||this.isArray)&&(this.open=!this.open)},toOtherAccel:function(){var t=w()(_.a.mark(function t(){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.commit("masForOtherAccel",this.data);case 2:this.$store.commit("component","other-accel");case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"oneUser",class:t.begin},[n("li",[n("div",{class:{bold:t.isFolder},staticStyle:{display:"inline-block"},on:{click:t.toggle}},[t._v("\n            "+t._s(t.name)+": \n            "),t.isFolder||t.isArray?n("span",[t._v("["+t._s(t.open?"-":"+")+"]")]):t._e(),t._v(" "),"accel"==t.name?n("button",{on:{click:function(e){return t.toOtherAccel()}}},[t._v("\n                Другая версия отображения\n            ")]):t._e()]),t._v(" "),t.isArray?n("p",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticStyle:{display:"inline-block",margin:"0"}},[t._v("\n            "+t._s(t.data)+"\n        ")]):t.isFolder?n("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticStyle:{margin:"0"}},t._l(t.data,function(t,e){return n("item",{key:e,staticClass:"item",attrs:{model:{value:t,name:e}}})}),1):n("p",{staticStyle:{display:"inline-block",margin:"0"}},[t._v("\n            "+t._s(t.data)+"\n        ")])])])},staticRenderFns:[]};var P=n("VU/8")(L,E,!1,function(t){n("7GtW")},"data-v-5b36198b",null).exports,T={name:"item",props:{model:{type:Object,required:!1,default:function(){return{value:this.$store.getters.masForOtherAccel,name:"accel"}}}},data:function(){return{open:!0}},computed:{begin:function(){return this.$store.getters.masForOtherAccel==this.data?"begin":""},data:function(){return(this.model.value==this.$store.getters.masForOtherAccel||this.model.value.length<10)&&(this.open=!0),this.model.value},name:function(){return this.model.name},isFolder:function(){return"object"==K()(this.data)&&!Array.isArray(this.data)&&r()(this.data)},isArray:function(){return!(!Array.isArray(this.data)||0==this.data.length)&&this.data}},methods:{toggle:function(){(this.isFolder||this.isArray)&&(this.open=!this.open)},back:function(){this.$store.commit("component","page-one-user")}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"oneUser",class:t.begin},[this.$store.getters.masForOtherAccel==this.data?n("button",{on:{click:function(e){return t.back()}}},[t._v(" \n        ← Назад\n    ")]):t._e(),t._v(" "),n("li",[n("div",{class:{bold:t.isFolder},staticStyle:{display:"inline-block"},on:{click:t.toggle}},[t._v("\n            "+t._s(t.name)+": \n            "),t.isFolder||t.isArray?n("span",[t._v("["+t._s(t.open?"-":"+")+"]")]):t._e()]),t._v(" "),t.isArray?n("ul",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticStyle:{margin:"0"}},t._l(t.data,function(t,e){return n("item",{key:e,staticClass:"item",attrs:{model:{value:t,name:e},first:!1}})}),1):t.isFolder?n("p",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticStyle:{display:"inline-block",margin:"0"}},[t._v("\n            "+t._s(t.data)+"\n        ")]):n("p",{staticStyle:{display:"inline-block",margin:"0"}},[t._v("\n            "+t._s(t.data)+"\n        ")])])])},staticRenderFns:[]};var I={name:"Main",components:{PageAll:A,PageMap:C,PageDoc:$,PageOneUser:P,OtherAccel:n("VU/8")(T,U,!1,function(t){n("65P6")},"data-v-77ebef00",null).exports},data:function(){return{displayError:"none",displaySuccess:"none",componentName:null,todos:[{text:"Все юзеры",component:"page-all","--before":"'\\f007'","--colorNav":"#41cadc",isActive:!1},{text:"Карты",component:"page-map","--before":"'\\f041'","--colorNav":"#41cadc",isActive:!1},{text:"Заметки",component:"page-doc","--before":"'\\f040'","--colorNav":"#41cadc",isActive:!1},{text:"Документация",component:"page-doc2","--before":"'\\f15c'","--colorNav":"#41cadc",isActive:!1}]}},created:function(){var t=w()(_.a.mark(function t(){var e=this;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.post("api/v1/data/",{token:sessionStorage.getItem("token")}).then(function(){var t=w()(_.a.mark(function t(n){return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.displaySuccess="grid",t.next=3,e.http.post("api/v1/data/all",{token:sessionStorage.getItem("token")}).then(function(t){e.$store.commit("all",t.data.all);var n=t.data.all.filter(function(t){return r()(t).some(function(e){return String(t[e]).toLowerCase().indexOf("admin0")>-1})});e.$store.commit("doc",n[0].name)});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t),e.displayError="block"});case 2:this.nav(0);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{nav:function(t){var e=!0,n=!1,a=void 0;try{for(var r,i=v()(this.todos);!(e=(r=i.next()).done);e=!0){var s=r.value;s.isActive=!1,s["--colorNav"]="#41cadc"}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}var o=this.todos[t];"page-doc2"==o.component?(this.$store.commit("component","page-all"),this.todos[0].isActive=!0,this.todos[0]["--colorNav"]="white",window.open("./doc/index.html")):(this.$store.commit("component",o.component),o.isActive=!0,o["--colorNav"]="white")},goToComponent:function(){return this.$store.getters.component}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{style:{display:t.displayError},attrs:{id:"error"}},[n("p",[t._v("Ошибка. Кажется, вы пропустили процедуру аутентификации.")]),t._v(" "),n("router-link",{attrs:{to:"/"}},[t._v("\n\t\t\tНа главную\n\t\t")])],1),t._v(" "),n("div",{style:{display:t.displaySuccess},attrs:{id:"success"}},[n("header",[t._m(0),t._v(" "),n("div",{staticClass:"nav"},t._l(t.todos,function(e,a){return n("div",{key:e.id,staticClass:"nav2",class:{colorNav:"page-doc2"==e.component?t.todos[3].isActive:e.isActive},style:"page-doc2"==e.component?t.todos[3]:e,on:{click:function(e){return t.nav(a)}}},[t._v("\n\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t")])}),0)]),t._v(" "),n("div",{staticClass:"right"},[n(t.goToComponent(),{tag:"div"})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"i"}),this._v(" "),e("p",{staticStyle:{display:"inline-block"}},[this._v("Панель управления")])])}]};var M=n("VU/8")(I,D,!1,function(t){n("pxQu")},"data-v-685b08e2",null).exports;i.a.use(l.a);var B=new l.a({mode:"history",routes:[{path:"/",name:"Auth",component:m},{path:"/main",name:"Main",component:M}]});i.a.config.productionTip=!1,i.a.prototype.http=d.a.create({baseURL:"https://pstype.herokuapp.com/",headers:{"Content-Type":"application/json"}}),i.a.use(s.a);var R=new s.a.Store({state:{all:[],doc:"",component:null,id:"",masForOtherAccel:[]},actions:{},mutations:{all:function(t,e){t.all=e},doc:function(t,e){t.doc=e},component:function(t,e){t.component=e},id:function(t,e){t.id=e},masForOtherAccel:function(t,e){t.masForOtherAccel=e}},getters:{all:function(t){return t.all},doc:function(t){return t.doc},component:function(t){return t.component},allId:function(t){return t.all[t.id]},masForOtherAccel:function(t){var e=["date","time","lon","lat","x","y","z","type"];t.masForOtherAccel.mas=[];for(var n=r()(t.masForOtherAccel)[0],a=t.masForOtherAccel[n].length,i=0;i<a;i++){var s=r()(t.masForOtherAccel).length-1;t.masForOtherAccel.mas[i]={};for(var o=function(n){var a=r()(t.masForOtherAccel).filter(function(t){return t==e[n]});t.masForOtherAccel.mas[i][a]=t.masForOtherAccel[a][i]},c=0;c<s;c++)o(c)}return t.masForOtherAccel.mas}},modules:{}});new i.a({el:"#app",store:R,router:B,components:{App:c},template:"<App/>"})},T2Ac:function(t,e){},c8SD:function(t,e){},ewHo:function(t,e){},pxQu:function(t,e){},rJ6Y:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bb6462d3d92b09609a6f.js.map